{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CoordenadorEstagioNavigation from '@/components/coordenador/estagio/CoordenadorEstagioNavigation.vue';\nimport RoundedBox from '@/components/base/RoundedBox.vue';\nimport TheAlert from '@/components/base/TheAlert.vue';\nimport { validateEmail } from '@/misc/validation.js';\nimport axios from \"@/misc/axios.js\";\nimport constants from \"@/misc/constants.js\";\nexport default {\n  components: {\n    CoordenadorEstagioNavigation,\n    RoundedBox,\n    TheAlert\n  },\n  data() {\n    return {\n      // Dados para cadastro\n      // v-model dos campos do formulário\n      nome: '',\n      email: '',\n      // Flags de validação\n      validNome: true,\n      validEmail: true,\n      // Flags de campos ativos para setar o z-index\n      activeNome: false,\n      activeEmail: false,\n      // Dados da tabela de orientadores\n      orientadores: [],\n      // Flags dos requests\n      // Usados para exibir o spinner\n      isStoring: false,\n      isShowing: false,\n      // Arrays de erros\n      errorMessageForm: [],\n      errorMessageTable: []\n    };\n  },\n  methods: {\n    async storeOrientador() {\n      this.errorMessageForm = [];\n      this.validNome = true;\n      this.validEmail = true;\n      if (!this.nome || this.nome.length < constants.MIN_LENGTH_NOME) {\n        this.validNome = false;\n        this.errorMessageForm.push(this.$t('error.nome-caracteres'));\n      }\n      if (!this.email || !validateEmail(this.email)) {\n        this.validEmail = false;\n        this.errorMessageForm.push(this.$t('error.email-formato'));\n      }\n      if (this.errorMessageForm.length > 0) return;\n      const campus = Number(this.$store.getters.campus);\n\n      // Cadastro somente de orientador de estágios\n      // Tipo constante (tipo = 1)\n      const payload = {\n        nome: this.nome,\n        email: this.email,\n        campus,\n        tipo: constants.ORIENTADOR,\n        ativo: true\n      };\n      try {\n        this.isStoring = true;\n        let response = null;\n        response = await axios.post(\"/coordenador/estagio/orientador\", payload);\n        if (response.data) {\n          this.showOrientadores();\n          this.resetForm();\n        }\n      } catch (error) {\n        this.handleError(error);\n      } finally {\n        this.isStoring = false;\n      }\n    },\n    async showOrientadores() {\n      try {\n        this.isShowing = true;\n        this.orientadores = [];\n        this.errorMessageTable = [];\n        let response = null;\n        response = await axios.get(\"/coordenador/estagio/orientador\");\n        if (response.data) this.orientadores = response.data;\n      } catch (error) {\n        this.handleError(error);\n      } finally {\n        this.isShowing = false;\n      }\n    },\n    handleError(error) {\n      if (error.response && error.response.data && error.response.data.error) this.errorMessageForm.push(error.response.data.error);else this.errorMessageForm.push(error.message);\n    },\n    resetForm() {\n      this.nome = '';\n      this.email = '';\n    }\n  },\n  mounted() {\n    this.showOrientadores();\n  }\n};","map":{"version":3,"names":["CoordenadorEstagioNavigation","RoundedBox","TheAlert","validateEmail","axios","constants","components","data","nome","email","validNome","validEmail","activeNome","activeEmail","orientadores","isStoring","isShowing","errorMessageForm","errorMessageTable","methods","storeOrientador","length","MIN_LENGTH_NOME","push","$t","campus","Number","$store","getters","payload","tipo","ORIENTADOR","ativo","response","post","showOrientadores","resetForm","error","handleError","get","message","mounted"],"sources":["C:\\Users\\THIAGO\\Documents\\Estágios\\sce-front\\src\\components\\coordenador\\estagio\\CoordenadorEstagioOrientador.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <CoordenadorEstagioNavigation />\r\n\r\n    <div class=\"container\">\r\n\r\n      <RoundedBox>\r\n\r\n        <h3 class=\"text-center\">{{ $t('header.coordenador.estagio.orientador') }}</h3>\r\n\r\n        <div class=\"sce-form\">\r\n          <form @submit.prevent=\"\">\r\n\r\n            <div :class=\"{\r\n          'z-1': !activeNome && validNome,\r\n          'z-2': !activeNome && !validNome,\r\n          'z-3': activeNome,\r\n        }\" class=\"form-floating\">\r\n              <input type=\"text\" class=\"form-control sce-form-top\" @focus=\"activeNome = true\" @blur=\"activeNome = false\"\r\n                :class=\"{ 'is-invalid': !validNome }\" id=\"orientadorNome\" name=\"orientadorNome\"\r\n                placeholder=\"Nome\" v-model.trim=\"nome\" autocomplete=\"off\">\r\n              <label for=\"orientadorNome\">{{ $t('label.nome') }}</label>\r\n            </div>\r\n\r\n            <div :class=\"{\r\n          'z-1': !activeEmail && validEmail,\r\n          'z-2': !activeEmail && !validEmail,\r\n          'z-3': activeEmail,\r\n        }\" class=\"form-floating\">\r\n              <input type=\"email\" class=\"form-control sce-form-bttom\" @focus=\"activeEmail = true\"\r\n                @blur=\"activeEmail = false\" :class=\"{ 'is-invalid': !validEmail }\" id=\"orientadorEmail\"\r\n                name=\"orientadorEmail\" placeholder=\"Email\" v-model.trim=\"email\" autocomplete=\"off\">\r\n              <label for=\"orientadorEmail\">{{ $t('label.email') }}</label>\r\n            </div>\r\n\r\n                 <div class=\"text-center\">\r\n              <button class=\"w-25 mt-3 btn btn-outline-success opacity-75\" type=\"submit\" @click=\"storeOrientador\"\r\n                :disabled=\"isStoring\">\r\n                <span v-if=\"isStoring\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                {{ $t('button.store') }}\r\n              </button>\r\n            </div>\r\n\r\n\r\n            <TheAlert :messages=\"errorMessageForm\"></TheAlert>\r\n\r\n          </form>\r\n        </div>\r\n\r\n        <TheAlert :messages=\"errorMessageTable\"></TheAlert>\r\n\r\n        <div v-if=\"errorMessageTable.length == 0 && isShowing\" class=\"d-flex justify-content-center mt-5\">\r\n          <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"sr-only\"></span>\r\n          </div>\r\n        </div>\r\n\r\n        <p v-if=\"errorMessageTable.length == 0 && !isShowing  && orientadores.length == 0\" class=\"text-center mt-5\">\r\n          {{ $t('message.admin.sem-orientadores') }}\r\n        </p>\r\n\r\n        <table class=\"table table-sm table-hover mt-5\"\r\n          v-if=\"errorMessageTable.length == 0 && !isShowing && orientadores.length > 0\">\r\n\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">#</th>\r\n              <th scope=\"col\">{{ $t('label.nome') }}</th>\r\n              <th scope=\"col\">{{ $t('label.email') }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"orientador in orientadores\" :key=\"orientador.id\">\r\n              <th scope=\"row\">{{ orientador.id }}</th>\r\n              <td>{{ orientador.nome }}</td>\r\n              <td>{{ orientador.email }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </RoundedBox>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport CoordenadorEstagioNavigation from '@/components/coordenador/estagio/CoordenadorEstagioNavigation.vue';\r\nimport RoundedBox from '@/components/base/RoundedBox.vue';\r\nimport TheAlert from '@/components/base/TheAlert.vue';\r\nimport { validateEmail } from '@/misc/validation.js';\r\nimport axios from \"@/misc/axios.js\";\r\nimport constants from \"@/misc/constants.js\";\r\n\r\nexport default {\r\n  components: {\r\n    CoordenadorEstagioNavigation,\r\n    RoundedBox,\r\n    TheAlert,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // Dados para cadastro\r\n      // v-model dos campos do formulário\r\n      nome: '',\r\n      email: '',\r\n\r\n      // Flags de validação\r\n      validNome: true,\r\n      validEmail: true,\r\n\r\n      // Flags de campos ativos para setar o z-index\r\n      activeNome: false,\r\n      activeEmail: false,\r\n\r\n      // Dados da tabela de orientadores\r\n      orientadores: [],\r\n\r\n      // Flags dos requests\r\n      // Usados para exibir o spinner\r\n      isStoring: false,\r\n      isShowing: false,\r\n\r\n      // Arrays de erros\r\n      errorMessageForm: [],\r\n      errorMessageTable: [],\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n\r\n    async storeOrientador() {\r\n\r\n      this.errorMessageForm = [];\r\n      this.validNome = true;\r\n      this.validEmail = true;\r\n\r\n      if (!this.nome || this.nome.length < constants.MIN_LENGTH_NOME) {\r\n        this.validNome = false;\r\n        this.errorMessageForm.push(this.$t('error.nome-caracteres'));\r\n      }\r\n\r\n      if (!this.email || !validateEmail(this.email)) {\r\n        this.validEmail = false;\r\n        this.errorMessageForm.push(this.$t('error.email-formato'));\r\n      }\r\n\r\n      if (this.errorMessageForm.length > 0)\r\n        return;\r\n\r\n      const campus = Number(this.$store.getters.campus);\r\n\r\n      // Cadastro somente de orientador de estágios\r\n      // Tipo constante (tipo = 1)\r\n      const payload = {\r\n        nome: this.nome,\r\n        email: this.email,\r\n        campus,\r\n        tipo: constants.ORIENTADOR,\r\n        ativo: true,\r\n      };\r\n\r\n      try {\r\n        this.isStoring = true;\r\n        let response = null;\r\n\r\n        response = await axios.post(\"/coordenador/estagio/orientador\", payload);\r\n\r\n        if (response.data) {\r\n          this.showOrientadores();\r\n          this.resetForm();\r\n        }\r\n\r\n      } catch (error) {\r\n        this.handleError(error);\r\n      } finally {\r\n        this.isStoring = false;\r\n      }\r\n    },\r\n\r\n    async showOrientadores() {\r\n      try {\r\n        this.isShowing = true;\r\n        this.orientadores = [];\r\n        this.errorMessageTable = [];\r\n        let response = null;\r\n\r\n        response = await axios.get(\"/coordenador/estagio/orientador\");\r\n\r\n        if (response.data)\r\n          this.orientadores = response.data;\r\n\r\n      } catch (error) {\r\n        this.handleError(error);\r\n      } finally {\r\n        this.isShowing = false;\r\n      }\r\n    },\r\n\r\n    handleError(error) {\r\n      if (error.response && error.response.data && error.response.data.error)\r\n        this.errorMessageForm.push(error.response.data.error);\r\n      else\r\n        this.errorMessageForm.push(error.message);\r\n    },\r\n\r\n    resetForm() {\r\n      this.nome = '';\r\n      this.email = '';\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.showOrientadores();\r\n  },\r\n\r\n}\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}