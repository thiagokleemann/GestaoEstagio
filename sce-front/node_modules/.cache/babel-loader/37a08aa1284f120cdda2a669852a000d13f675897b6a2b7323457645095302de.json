{"ast":null,"code":"import axios from \"@/misc/axios.js\";\nexport default {\n  async logout(context) {\n    context.commit(\"destroySession\");\n    try {\n      await axios.delete(\"/session\");\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.error) console.error(error.response.data.error);else console.error(error.message);\n    }\n  },\n  async loginGoogle(context) {\n    let response = null;\n    try {\n      response = await axios.post(\"/session\");\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.error) console.error(error.response.data.error);else console.error(error.message);\n    }\n    if (response.data.url) {\n      context.commit(\"setGoogleLoginUrl\", {\n        googleLoginUrl: response.data.url\n      });\n    }\n  },\n  async loginAdmin(_context, payload) {\n    let response = null;\n    try {\n      response = await axios.post(\"/admin/session\", payload);\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.error) console.error(error.response.data.error);else console.error(error.message);\n    }\n    if (response.status === 200) await this.dispatch('startSession');\n  },\n  async startSession(context) {\n    let userInfoResponse = null;\n    try {\n      userInfoResponse = await axios.get(\"/usuario/info\");\n    } catch (error) {\n      if (error.userInfoResponse && error.userInfoResponse.data && error.userInfoResponse.data.error) console.error(error.userInfoResponse.data.error);else console.error(error.message);\n    }\n    if (userInfoResponse && userInfoResponse.data) {\n      const {\n        uid,\n        email,\n        nome,\n        tipo,\n        campus\n      } = userInfoResponse.data;\n      context.commit(\"setSession\", {\n        uid,\n        email,\n        nome,\n        tipo,\n        campus\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","logout","context","commit","delete","error","response","data","console","message","loginGoogle","post","url","googleLoginUrl","loginAdmin","_context","payload","status","dispatch","startSession","userInfoResponse","get","uid","email","nome","tipo","campus"],"sources":["C:/Users/THIAGO/Documents/Est√°gios/sce-front/src/store/modules/auth/actions.js"],"sourcesContent":["import axios from \"@/misc/axios.js\";\r\n\r\nexport default {\r\n\r\n\tasync logout(context) {\r\n\t\tcontext.commit(\"destroySession\");\r\n\t\t\r\n\t\ttry {\r\n\t\t\tawait axios.delete(\"/session\");\r\n\t\t} catch (error) {\r\n\t\t\tif (\r\n\t\t\t\terror.response &&\r\n\t\t\t\terror.response.data &&\r\n\t\t\t\terror.response.data.error\r\n\t\t\t)\r\n\t\t\t\tconsole.error(error.response.data.error);\r\n\t\t\telse console.error(error.message);\r\n\t\t}\t\t\t\r\n\t},\r\n\r\n\tasync loginGoogle(context) {\r\n\t\tlet response = null;\r\n\t\ttry {\r\n\t\t\tresponse = await axios.post(\"/session\");\r\n\t\t} catch (error) {\r\n\t\t\tif (\r\n\t\t\t\terror.response &&\r\n\t\t\t\terror.response.data &&\r\n\t\t\t\terror.response.data.error\r\n\t\t\t)\r\n\t\t\t\tconsole.error(error.response.data.error);\r\n\t\t\telse console.error(error.message);\r\n\t\t}\r\n\r\n\t\tif (response.data.url) {\r\n\t\t\tcontext.commit(\"setGoogleLoginUrl\", {\r\n\t\t\t\tgoogleLoginUrl: response.data.url,\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tasync loginAdmin(_context, payload) {\r\n\t\tlet response = null;\r\n\t\ttry {\r\n\t\t\tresponse = await axios.post(\"/admin/session\", payload);\r\n\t\t} catch (error) {\r\n\t\t\tif (\r\n\t\t\t\terror.response &&\r\n\t\t\t\terror.response.data &&\r\n\t\t\t\terror.response.data.error\r\n\t\t\t)\r\n\t\t\t\tconsole.error(error.response.data.error);\r\n\t\t\telse console.error(error.message);\r\n\t\t}\r\n\r\n\t\tif (response.status === 200)\r\n\t\t\tawait this.dispatch('startSession');\r\n\t},\r\n\r\n\tasync startSession(context) {\r\n\r\n\t\tlet userInfoResponse = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tuserInfoResponse = await axios.get(\"/usuario/info\");\r\n\t\t} catch (error) {\r\n\t\t\tif (\r\n\t\t\t\terror.userInfoResponse &&\r\n\t\t\t\terror.userInfoResponse.data &&\r\n\t\t\t\terror.userInfoResponse.data.error\r\n\t\t\t)\r\n\t\t\t\tconsole.error(error.userInfoResponse.data.error);\r\n\t\t\telse console.error(error.message);\r\n\t\t}\r\n\r\n\t\tif (userInfoResponse && userInfoResponse.data) {\r\n\t\t\t\r\n\t\t\tconst { uid, email, nome, tipo, campus } = userInfoResponse.data;\r\n\t\t\tcontext.commit(\"setSession\", {\r\n\t\t\t\tuid,\r\n\t\t\t\temail,\r\n\t\t\t\tnome,\r\n\t\t\t\ttipo,\r\n\t\t\t\tcampus,\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}