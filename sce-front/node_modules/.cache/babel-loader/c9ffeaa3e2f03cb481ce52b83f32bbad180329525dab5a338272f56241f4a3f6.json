{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-08c7da82\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"file-input\",\n  class: \"btn btn-primary\"\n}, \"Adicionar Envio\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  key: 0,\n  class: \"file-info\"\n};\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"input\", {\n    id: \"file-input\",\n    type: \"file\",\n    onChange: $setup.handleFileSelect,\n    hidden: \"\",\n    ref: \"fileInput\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), $setup.file ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"span\", null, _toDisplayString($setup.file.name), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.removeFile,\n    disabled: $setup.isLoading,\n    title: \"Remover\"\n  }, \" × \", 8 /* PROPS */, _hoisted_3)])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"Nenhum arquivo selecionado.\")), $setup.file ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    onClick: $setup.handleUpload,\n    class: \"btn btn-success\",\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? \"Enviando...\" : \"Enviar Arquivo\"), 9 /* TEXT, PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementVNode","for","class","key","_createElementBlock","_hoisted_1","id","type","onChange","$setup","handleFileSelect","hidden","ref","file","_hoisted_2","_toDisplayString","name","onClick","removeFile","disabled","isLoading","title","_hoisted_3","_hoisted_4","handleUpload","_hoisted_5","_createCommentVNode"],"sources":["C:\\Users\\THIAGO\\Documents\\Estágios\\sce-front\\src\\components\\UI\\UploadBox.vue"],"sourcesContent":["<script setup>\r\n\timport { ref, defineEmits } from \"vue\";\r\n\timport axios from \"axios\";\r\n\r\n\t// 1. O prop 'multiple' não é mais necessário, então foi removido.\r\n\r\n\t// 2. O estado agora armazena um único arquivo (ou null), em vez de um array.\r\n\tconst file = ref(null);\r\n\tconst type = ref(2);\r\n\tconst isLoading = ref(false);\r\n\r\n\tconst emit = defineEmits([\"changed\"]);\r\n\r\n\tfunction handleFileSelect(e) {\r\n\t\tconst input = e.target;\r\n\t\t// 3. Pegamos apenas o primeiro arquivo da lista (índice 0).\r\n\t\tconst selectedFile = input?.files[0];\r\n\t\tif (selectedFile) {\r\n\t\t\tfile.value = selectedFile;\r\n\t\t\temit(\"changed\", file.value);\r\n\t\t}\r\n\t}\r\n\r\n\t// 4. A função de remoção agora simplesmente limpa o estado.\r\n\tfunction removeFile() {\r\n\t\tfile.value = null;\r\n\t\temit(\"changed\", null);\r\n\t}\r\n\r\n\tasync function handleUpload() {\r\n\t\t// A verificação agora é se 'file.value' existe.\r\n\t\tif (!file.value) {\r\n\t\t\talert(\"Por favor, selecione um arquivo.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst formData = new FormData();\r\n\r\n\t\t// 5. Adicionamos o único arquivo ao FormData.\r\n\t\t//    É uma boa prática usar uma chave no singular ('documento') se é apenas um arquivo.\r\n\t\t//    Verifique se seu backend espera 'documento' ou 'documentos'.\r\n\t\tformData.append(\"documento\", file.value);\r\n\t\tformData.append(\"tipo\", type.value);\r\n\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await axios.post(\"/aluno/documento\", formData, {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log(\"Arquivo enviado com sucesso:\", response.data);\r\n\t\t\talert(\"Arquivo enviado com sucesso!\");\r\n\t\t\tfile.value = null; // Limpa o arquivo após o envio\r\n\t\t\temit(\"changed\", null);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Erro ao enviar o arquivo:\", error);\r\n\t\t\talert(\"Ocorreu um erro ao enviar o arquivo. Tente novamente.\");\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div>\r\n\t\t<label\r\n\t\t\tfor=\"file-input\"\r\n\t\t\tclass=\"btn btn-primary\"\r\n\t\t\t>Adicionar Envio</label\r\n\t\t>\r\n\t\t<input\r\n\t\t\tid=\"file-input\"\r\n\t\t\ttype=\"file\"\r\n\t\t\t@change=\"handleFileSelect\"\r\n\t\t\thidden\r\n\t\t\tref=\"fileInput\"\r\n\t\t/>\r\n\r\n\t\t<div\r\n\t\t\tv-if=\"file\"\r\n\t\t\tclass=\"file-info\"\r\n\t\t>\r\n\t\t\t<span>{{ file.name }}</span>\r\n\t\t\t<button\r\n\t\t\t\t@click=\"removeFile\"\r\n\t\t\t\t:disabled=\"isLoading\"\r\n\t\t\t\ttitle=\"Remover\"\r\n\t\t\t>\r\n\t\t\t\t&times;\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<p v-else>Nenhum arquivo selecionado.</p>\r\n\r\n\t\t<button\r\n\t\t\tv-if=\"file\"\r\n\t\t\t@click=\"handleUpload\"\r\n\t\t\tclass=\"btn btn-success\"\r\n\t\t\t:disabled=\"isLoading\"\r\n\t\t>\r\n\t\t\t{{ isLoading ? \"Enviando...\" : \"Enviar Arquivo\" }}\r\n\t\t</button>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped>\r\n\t/* Estilos podem ser mantidos ou ajustados */\r\n\t.btn {\r\n\t\tpadding: 8px 12px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\tcursor: pointer;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\t.btn-primary {\r\n\t\tbackground-color: #007bff;\r\n\t\tcolor: white;\r\n\t}\r\n\t.btn-success {\r\n\t\tbackground-color: #28a745;\r\n\t\tcolor: white;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\t.file-info {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 8px;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 4px;\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\t.file-info button {\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tfont-size: 1.2rem;\r\n\t\tcolor: red;\r\n\t\tfont-weight: bold;\r\n\t\tcursor: pointer;\r\n\t}\r\n</style>\r\n"],"mappings":";;gEAoEEA,mBAAA,CAG6B;EAF5BC,GAAG,EAAC,YAAY;EAChBC,KAAK,EAAC;GACL,iBAAe;;EAvEnBC,GAAA;EAmFGD,KAAK,EAAC;;mBAnFT;;EAAAC,GAAA;AAAA;mBAAA;;uBAmECC,mBAAA,CAqCM,cApCLC,UAG6B,EAE7BL,mBAAA,CAME;IALDM,EAAE,EAAC,YAAY;IACfC,IAAI,EAAC,MAAM;IACVC,QAAM,EAAEC,MAAA,CAAAC,gBAAgB;IACzBC,MAAM,EAAN,EAAM;IACNC,GAAG,EAAC;kDAIEH,MAAA,CAAAI,IAAI,I,cADXT,mBAAA,CAYM,OAZNU,UAYM,GARLd,mBAAA,CAA4B,cAAAe,gBAAA,CAAnBN,MAAA,CAAAI,IAAI,CAACG,IAAI,kBAClBhB,mBAAA,CAMS;IALPiB,OAAK,EAAER,MAAA,CAAAS,UAAU;IACjBC,QAAQ,EAAEV,MAAA,CAAAW,SAAS;IACpBC,KAAK,EAAC;KACN,KAED,iBA5FHC,UAAA,E,oBA8FElB,mBAAA,CAAyC,KA9F3CmB,UAAA,EA8FY,6BAA2B,IAG9Bd,MAAA,CAAAI,IAAI,I,cADXT,mBAAA,CAOS;IAvGXD,GAAA;IAkGIc,OAAK,EAAER,MAAA,CAAAe,YAAY;IACpBtB,KAAK,EAAC,iBAAiB;IACtBiB,QAAQ,EAAEV,MAAA,CAAAW;sBAERX,MAAA,CAAAW,SAAS,2DAtGfK,UAAA,KAAAC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}